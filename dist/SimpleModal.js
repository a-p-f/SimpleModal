/*!
  SimpleModal.js
  version: 2.5.0-rc
  author: Alex Fischer
  homepage: https://github.com/a-p-f/SimpleModal
*/
var SimpleModal=function(e){"use strict";var n,t=(document.documentElement.getAttribute("simple-modal-config")||"").split(" "),o=-1!=t.indexOf("autofocus"),i=-1!=t.indexOf("animate");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e){return function(e){return null!==e&&"object"==a(e)}(e)&&e.message}function r(e,n){e.postMessage({message:n},"*")}function d(e,n){setTimeout(n,1e3*parseFloat(getComputedStyle(e).animationDuration))}function c(){var e=document.querySelector("[simple-modal-autofocus]");e&&e.focus()}function s(e){var n=document.documentElement,t=parseFloat(getComputedStyle(n).animationDuration);setTimeout(e,1e3*t)}window.parent!=window&&(addEventListener("message",(function(e){e.source==window.parent&&("CANCEL_SIMPLE_MODAL_ANIMATIONS"==l(e.data)&&(i&&m(),r(window.parent,"SIMPLE_MODAL_ANIMATIONS_CANCELED")))})),n=document.activeElement,document.documentElement.addEventListener("focus",(function(){n=document.activeElement}),!0),addEventListener("focus",(function(){n&&n.focus()})));var u=!1;function m(){if(!u){u=!0;var e=document.documentElement;e.classList.remove("SimpleModal-opening"),e.classList.remove("SimpleModal-animating"),o&&c()}}function f(e){r(window.parent,"ANIMATE_SIMPLE_MODAL_BACKDROP_OUT");var n=document.documentElement;n.classList.add("SimpleModal-closing"),n.classList.add("SimpleModal-animating"),e&&s(e)}function p(){if(window.parent==window)throw new Error("This is not a SimpleModal child window (it's not even in iframe)")}function v(){try{return Boolean(window.parent.location.hostname)}catch(e){return!1}}function S(){var e=window.parent.SimpleModal&&window.parent.SimpleModal.layerForWindow(window);if(!e)throw new Error("This is not a SimpleModal child window");return e}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(p(),v()){var t=S();return window.parent.SimpleModal.resolveLayer(t,e),void(n&&n())}if(n)throw new Error('"then" callback to SimpleModal.close is not supported in cross origin layers.');parent.postMessage({value:e,message:"CLOSE_SIMPLE_MODAL_CHILD"},"*")}function M(e){parent.postMessage({message:"REPLACE_SIMPLE_MODAL",url:e},"*")}function L(e){e._SimpleModalAriaInitialized||(e._SimpleModalAriaInitialized=!0,e._SimpleModalInitialAriaHidden=e.getAttribute("aria-hidden"),e.setAttribute("aria-hidden","true"))}function h(e){if(e._SimpleModalAriaInitialized){var n=e._SimpleModalInitialAriaHidden;null===n?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",n),delete e._SimpleModalAriaInitialized,delete e._SimpleModalInitialAriaHidden}}function b(e,n){var t=n.getBoundingClientRect(),o=e.style,i=document.documentElement,a=Math.max(0,t.left);o.left=a+"px",o.width=Math.min(t.right-a,i.clientWidth-a)+"px";var l=Math.max(0,t.top);o.top=l+"px",o.height=Math.min(t.bottom-l,i.clientHeight-l)+"px"}function w(e,n){(n||document.body).appendChild(e);var t=e.style;if(t.position="fixed",t.border="none",t.padding=0,t.zIndex=2147483647,t.zIndex=9007199254740991,n){var o=b.bind(null,e,n);e._simple_modal_position=o,o(),addEventListener("scroll",o,!0),addEventListener("resize",o)}else t.left=t.top="0px",t.width=t.height="100%"}function _(e,n){if(e.parentElement&&e.parentElement.removeChild(e),n){var t=e._simple_modal_position;removeEventListener("scroll",t,!0),removeEventListener("resize",t)}}function g(e){var n,t,o,i,a,l=e.style,r=0;function d(){e.scrollTop=n,e.scrollLeft=t}return{increment:function(){1==++r&&function(){n=e.scrollTop,t=e.scrollLeft,o=l.overflowX,i=l.overflowY,a=l.maxWidth,l.maxWidth=e.clientWidth+"px",e.scrollWidth>e.clientWidth&&(l.overflowX="hidden");e.scrollHeight>e.clientHeight&&(l.overflowY="hidden");e.addEventListener("scroll",d)}()},decrement:function(){0==--r&&(l.maxWidth=a,l.overflowX=o,l.overflowY=i,e.removeEventListener("scroll",d))}}}function A(e){e._SimpleModalScrollLock=e._SimpleModalScrollLock||g(e),e._SimpleModalScrollLock.increment()}function y(e){e._SimpleModalScrollLock.decrement()}function I(e){return e.container?[e.container]:[document.documentElement,document.body]}addEventListener("load",(function(){if(i){document.querySelector("[autofocus]")&&console.warn("autofocus not recommended when using SimpleModal animations. Can sometimes break animations in Safari, but only in certain situations.");var e=document.documentElement;e.classList.add("SimpleModal-opening"),e.classList.add("SimpleModal-animating"),s((function(){m()}))}else o&&c()}));var x="a,button,input,textarea,select,summary,[contenteditable],area,audio,video,object,embed,svg,iframe";function C(e){var n=e._SimpleModalInitialTabIndex;void 0!==n&&(null==n?e.removeAttribute("tabindex"):e.setAttribute("tabindex",n),delete e._SimpleModalInitialTabIndex)}function O(e,n){for(var t,o=function(e){return(e.container||document.body).querySelectorAll(x)}(e),i=o.length-1;i>=0;i--)o[i]!=e.iframe&&((t=o[i]).hasOwnProperty("_SimpleModalInitialTabIndex")||(t._SimpleModalInitialTabIndex=t.getAttribute("tabindex"),t.setAttribute("tabindex",-1)));e.replaces?(e.initialActiveElement=e.replaces.initialActiveElement,e.replaces.initialActiveElement=null):e.initialActiveElement=document.activeElement,e.iframe.focus()}function D(e,n){for(var t=e;t=t.nextElementSibling;)if(t._isSimpleModalIframe&&t!=n)return!0;return!!e.parentElement&&D(e.parentElement,n)}var T=[];function P(e){e.style.opacity=""}function N(e){if(!function(e){try{return Boolean(e.contentDocument)}catch(e){return!1}}(e))return!1;var n=getComputedStyle(e.contentDocument.documentElement).backgroundColor;return"transparent"==n||"rgba(0, 0, 0, 0)"==n}function k(e){var n=e.iframe;n.style.backgroundColor=N(n)?"white":"",e.replaces?r(e.iframe.contentWindow,"CANCEL_SIMPLE_MODAL_ANIMATIONS"):P(n),n!=document.activeElement&&n.focus(),e.onload&&e.onload(e.iframe.contentWindow)}function R(e){for(var n=0;n<T.length;n++)if(T[n].iframe.contentWindow==e)return T[n]}function W(e,n){var t=document.createElement("div");t.classList.add("SimpleModalBackdrop"),t.classList.add("animating"),w(t,e.container),d(t,(function(){t.classList.remove("animating")})),e.backdrop=t;var o=function(e){var n=document.createElement("iframe");return n.classList.add("SimpleModalIframe"),n._isSimpleModalIframe=!0,n.style.opacity=0,null!==e&&n.setAttribute("sandbox",e),n}(e.sandbox);e.iframe=o,T.push(e),function(e){I(e).forEach(A)}(e),w(e.iframe,e.container),O(e),function(e){e.iframe.setAttribute("role","dialog"),function(e,n){for(var t=e;t=t.previousElementSibling;)n(t)}(e.iframe,L)}(e),o.addEventListener("load",k.bind(null,e)),o.src=n}function z(e,n){var t=T.indexOf(e);if(-1==t)throw new Error("Layer is not in layers.");T.splice(t,1);var o=e.backdrop;o&&B(o,e.container),function(e){!function(e,n){for(var t=e;t=t.nextElementSibling;)if(t._isSimpleModalIframe)return;for(t=e;t=t.previousElementSibling;)if(n(t),t._isSimpleModalIframe)return}(e.iframe,h)}(e),function(e){for(var n=document.querySelectorAll(x),t=n.length-1;t>=0;t--){var o=n[t];D(o,e.iframe)||C(o)}var i=e.initialActiveElement;i&&i.tabIndex>=0&&i.focus()}(e),_(e.iframe,e.container),function(e){I(e).forEach(y)}(e),e.onclose&&e.onclose(n),e.promiseResolver&&e.promiseResolver(n)}function H(e,n){var t={sandbox:e.sandbox,onload:e.onload,onclose:e.onclose,promiseResolver:e.promiseResolver};e.onload=null,e.onclose=null,e.promiseResolver=null,t.replaces=e,W(t,n)}function B(e,n){_(e,n)}return addEventListener("message",(function(e){var n=R(e.source);if(n){var t=e.data;"CLOSE_SIMPLE_MODAL_CHILD"==l(t)&&(z(n,e.data.value),closeChild(e.data.value)),"REPLACE_SIMPLE_MODAL"==l(t)&&H(n,t.url),"SIMPLE_MODAL_ANIMATIONS_CANCELED"==l(t)&&(P(n.iframe),z(n.replaces),n.replaces=null),"ANIMATE_SIMPLE_MODAL_BACKDROP_OUT"==l(t)&&function(e){var n=e.backdrop;n&&(e.backdrop=null,n.classList.add("animating"),n.classList.add("closing"),d(n,B.bind(null,n,e.container)))}(n)}})),e.animateOut=f,e.close=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;function t(){E(e,n)}i?f(t):t()},e.closeChild=function(e){var n=T[T.length-1];if(!n)throw new Error("No modal window is open");z(n,e)},e.layerForWindow=R,e.open=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.onload,o=void 0===t?null:t,i=n.onclose,a=void 0===i?null:i,l=n.sandbox,r=void 0===l?null:l,d=n.container,c=void 0===d?null:d,s={sandbox:r,onload:o,onclose:a,promiseResolver:null,container:c};W(s,e);try{return new Promise((function(e,n){s.promiseResolver=e}))}catch(e){}},e.reload=function(){M(location.href)},e.replace=M,e.replaceLayer=H,e.resolveLayer=z,e.updatePositions=function(){for(var e=0;e<T.length;e++)n=T[e].iframe,T[e].container&&n._simple_modal_position();var n},e}({});
