/*!
  SimpleModal.js
  version: 2.0.0
  author: Alex Fischer
  homepage: https://github.com/a-p-f/SimpleModal
*/
var SimpleModal=function(e){"use strict";var t,n,o,l,i,d,r;addEventListener("scroll",(function(){d&&(document.documentElement.scrollTop=l,document.documentElement.scrollLeft=i)}));var a,c,u,s=null;function m(){if(s)throw new Error("iframe already exists!");var e,a,c;e=document.documentElement,a=e.style,c=document.body.style,n=c.overflowX,o=c.overflowY,t=a.maxWidth,l=e.scrollTop,i=e.scrollLeft,d=!0,a.maxWidth=e.clientWidth+"px",c.overflowX="hidden",c.overflowY="hidden",r=function(){var e=document.activeElement;try{for(;e&&e.contentDocument&&e.contentDocument.activeElement;)e=e.contentDocument.activeElement}catch(e){}return e}(),addEventListener("click",v,!0),document.documentElement.addEventListener("focus",w,!0);var u=(s=document.createElement("iframe")).style;return u.position="fixed",u.top=0,u.left=0,u.width="100%",u.height="100%",u.border="none",u.margin=0,u.padding=0,u.visibility="hidden",u.zIndex=2147483647,u.zIndex=9007199254740991,s.setAttribute("role","dialog"),s.setAttribute("aria-modal","true"),document.body.appendChild(s),s.focus(),s}function f(){var e,l;s&&(s.parentElement.removeChild(s),removeEventListener("click",v,!0),document.documentElement.removeEventListener("focus",w,!0),r&&r.focus(),r=null,s=null,e=document.documentElement.style,l=document.body.style,d=!1,l.overflowY=o,l.overflowX=n,e.maxWidth=t)}function v(e){e.stopPropagation(),e.preventDefault()}function w(){document.activeElement!=s&&s.focus()}function h(e){return Boolean(e.contentDocument)}function p(e){if(!h(e))return!1;var t=getComputedStyle(e.contentDocument.documentElement).backgroundColor;return"transparent"==t||"rgba(0, 0, 0, 0)"==t}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;f(),c(e),u&&u(e),a=null,c=null,u=null,t&&t(window)}function L(){var e=window.parent!=window&&window.parent.SimpleModal;return e&&e.getChild()==window?e:null}return addEventListener("message",(function(e){a&&e.source==a.contentWindow&&(e.data&&"CLOSE_SIMPLE_MODAL_CHILD"==e.data.message&&E(e.data.value),e.data&&"simple_modal_child_titled"in e.data&&a.setAttribute("aria-label",e.data.simple_modal_child_titled))})),addEventListener("message",(function(e){window.parent!=window&&e.source==window.parent&&"SIMPLE_MODAL_CHILD_LOADED"==e.data&&window.parent.postMessage({simple_modal_child_titled:document.title},"*")})),e.close=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=!1;try{e=L()}catch(e){o=!0}if(e)e.closeChild(t,n);else{if(!o)throw new Error("This window is not a SimpleModal child.");if(n)throw new Error('"then" callback to SimpleModal.close is not supported in cross origin layers.');parent.postMessage({value:t,message:"CLOSE_SIMPLE_MODAL_CHILD"},"*")}},e.closeChild=E,e.getChild=function(){return a&&a.contentWindow||null},e.open=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.onload,o=void 0===n?function(e){}:n,l=t.onclose,i=void 0===l?function(e){}:l,d=t.sandbox,r=void 0===d?null:d;if(a)throw new Error("A SimpleModal is already open. A window may only open one SimpleModal at a time. We may relax this in the future, but for now, that's the deal.");a=m(),c=i,null!==r&&a.setAttribute("sandbox",r),a.onload=function(){a.style.backgroundColor=p(a)?"white":"",h(a)?a.setAttribute("aria-label",a.contentDocument.title):a.contentWindow.postMessage("SIMPLE_MODAL_CHILD_LOADED","*"),o(a.contentWindow),a.style.visibility="",a!=document.activeElement&&a.focus()},a.src=e;try{return new Promise((function(e,t){u=e}))}catch(e){}},e}({});
