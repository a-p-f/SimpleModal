/*!
  SimpleModal.js
  version: 2.1.0
  author: Alex Fischer
  homepage: https://github.com/a-p-f/SimpleModal
*/
var SimpleModal=function(e){"use strict";var t,n,o,i,l,a,d;addEventListener("scroll",(function(){a&&(document.documentElement.scrollTop=i,document.documentElement.scrollLeft=l)}));var c=null;function r(){if(c)throw new Error("iframe already exists!");var e,r,u;e=document.documentElement,r=e.style,u=document.body.style,n=u.overflowX,o=u.overflowY,t=r.maxWidth,i=e.scrollTop,l=e.scrollLeft,a=!0,r.maxWidth=e.clientWidth+"px",u.overflowX="hidden",u.overflowY="hidden",d=function(){var e=document.activeElement;try{for(;e&&e.contentDocument&&e.contentDocument.activeElement;)e=e.contentDocument.activeElement}catch(e){}return e}(),addEventListener("click",s,!0),document.documentElement.addEventListener("focus",m,!0);var f=(c=document.createElement("iframe")).style;f.position="fixed",f.top=0,f.left=0,f.width="100%",f.height="100%",f.border="none",f.margin=0,f.padding=0,f.visibility="hidden",f.zIndex=2147483647,f.zIndex=9007199254740991,c.setAttribute("role","dialog"),c.setAttribute("aria-modal","true"),document.body.appendChild(c),c.focus()}function u(){var e,i;c&&(c.parentElement.removeChild(c),removeEventListener("click",s,!0),document.documentElement.removeEventListener("focus",m,!0),d&&d.focus(),d=null,c=null,e=document.documentElement.style,i=document.body.style,a=!1,i.overflowY=o,i.overflowX=n,e.maxWidth=t)}function s(e){e.stopPropagation(),e.preventDefault()}function m(){document.activeElement!=c&&c.focus()}var f,v,p=(document.documentElement.getAttribute("simple-modal-config")||"").split(" "),w=-1!=p.indexOf("autofocus"),h=-1!=p.indexOf("animate");function E(){var e=document.querySelector("[simple-modal-autofocus]");e&&e.focus()}function g(e){var t=document.documentElement,n=parseFloat(getComputedStyle(t).animationDuration);setTimeout(e,1e3*n)}function L(e){var t=document.documentElement;t.classList.add("SimpleModal-closing"),t.classList.add("SimpleModal-animating"),g(e)}function y(){var e=window.parent!=window&&window.parent.SimpleModal;return e&&e.getChild()==window?e:null}function M(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=!1;try{e=y()}catch(e){o=!0}if(e)e.closeChild(t,n);else{if(!o)throw new Error("This window is not a SimpleModal child.");if(n)throw new Error('"then" callback to SimpleModal.close is not supported in cross origin layers.');parent.postMessage({value:t,message:"CLOSE_SIMPLE_MODAL_CHILD"},"*")}}function S(e){return Boolean(e.contentDocument)}function b(e){if(!S(e))return!1;var t=getComputedStyle(e.contentDocument.documentElement).backgroundColor;return"transparent"==t||"rgba(0, 0, 0, 0)"==t}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;u(),f(e),v&&v(e),f=null,v=null,t&&t(window)}return addEventListener("message",(function(e){window.parent!=window&&e.source==window.parent&&"SIMPLE_MODAL_CHILD_LOADED"==e.data&&window.parent.postMessage({simple_modal_child_titled:document.title},"*")})),h?(document.querySelector("[autofocus]")&&console.warn("autofocus not recommended when using SimpleModal animations. Can sometimes break animations in Safari, but only in certain situations."),addEventListener("load",(function(){var e=document.documentElement;e.classList.add("SimpleModal-opening"),e.classList.add("SimpleModal-animating"),g((function(){e.classList.remove("SimpleModal-opening"),e.classList.remove("SimpleModal-animating"),w&&E()}))}))):w&&E(),addEventListener("message",(function(e){c&&e.source==c.contentWindow&&(e.data&&"CLOSE_SIMPLE_MODAL_CHILD"==e.data.message&&_(e.data.value),e.data&&"simple_modal_child_titled"in e.data&&c.setAttribute("aria-label",e.data.simple_modal_child_titled))})),e.close=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;function n(){M(e,t)}h?L(n):n()},e.closeChild=_,e.getChild=function(){return c&&c.contentWindow||null},e.open=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.onload,o=void 0===n?function(e){}:n,i=t.onclose,l=void 0===i?function(e){}:i,a=t.sandbox,d=void 0===a?null:a;if(c)throw new Error("A SimpleModal is already open. A window may only open one SimpleModal at a time. We may relax this in the future, but for now, that's the deal.");r(),f=l,null!==d&&c.setAttribute("sandbox",d),c.onload=function(){c.style.backgroundColor=b(c)?"white":"",S(c)?c.setAttribute("aria-label",c.contentDocument.title):c.contentWindow.postMessage("SIMPLE_MODAL_CHILD_LOADED","*"),o(c.contentWindow),c.style.visibility="",c!=document.activeElement&&c.focus()},c.src=e;try{return new Promise((function(e,t){v=e}))}catch(e){}},e}({});
